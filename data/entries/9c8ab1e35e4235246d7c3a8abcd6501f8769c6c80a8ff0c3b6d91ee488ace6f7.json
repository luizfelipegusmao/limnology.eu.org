{"title":"Preact Hooks Internal","link":"https://blog.whs.in.th/node/3465","date":1591460115000,"content":"<p>‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏±‡πà‡∏á‡∏≠‡πà‡∏≤‡∏ô Inferno ‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏ó‡∏≥ Hook ‡∏°‡∏±‡πâ‡∏¢</p>\n\n\n\n<p>‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏¢‡∏≤‡∏Å‡∏´‡∏≤ framework ‡∏ó‡∏µ‡πà‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏£‡∏≤‡∏ß‡πà‡∏≤ Hook ‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠ Magic ‡πÅ‡∏•‡∏∞‡∏°‡∏±‡∏ô implement ‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Magic ‡∏ô‡∏±‡πà‡∏ô‡πÅ‡∏´‡∏•‡∏∞</p>\n\n\n\n<p>‡∏Å‡πá‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤ Inferno ‡∏Ñ‡∏¥‡∏î‡∏¢‡∏±‡∏á‡πÑ‡∏á ‡πÅ‡∏ï‡πà‡∏Å‡πá‡∏°‡∏µ‡∏Ñ‡∏ô<a href=\"https://github.com/infernojs/inferno/issues/1453#issuecomment-592884895\">‡∏•‡∏≠‡∏á‡πÜ ‡∏ó‡∏≥‡∏≠‡∏¢‡∏π‡πà</a> ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏Ñ‡πâ‡∏≤‡∏Å‡πá‡πÑ‡∏õ‡∏•‡∏≠‡∏Å Preact ‡∏°‡∏≤‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ ‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ö React ‡∏°‡∏±‡πâ‡∏¢ ‡πÅ‡∏ï‡πà‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢‡∏î‡∏µ‡πÄ‡∏•‡∏¢‡πÄ‡∏≠‡∏≤‡∏°‡∏≤ blog ‡πÑ‡∏ß‡πâ‡∏´‡∏ô‡πà‡∏≠‡∏¢</p>\n\n\n\n<h2>useState</h2>\n\n\n\n<p>‡∏ã‡∏≠‡∏£‡πå‡∏™‡∏Ç‡∏≠‡∏á Preact Hook ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà <a href=\"https://github.com/preactjs/preact/blob/59c9abaee16dfeb1411f197ef071c94525087bc6/hooks/src/index.js#\">hooks/src/index.js</a> ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÑ‡∏•‡πà‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏ô‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Ñ‡∏∏‡πâ‡∏ô‡πÄ‡∏Ñ‡∏¢‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏á‡πà‡∏≤‡∏¢ ‡∏ô‡∏±‡πà‡∏ô‡∏Ñ‡∏∑‡∏≠ useState ‡∏ã‡∏∂‡πà‡∏á‡∏û‡∏∑‡πâ‡∏ô‡πÜ ‡∏°‡∏≤‡∏Å&#8230;</p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-javascript\">export function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}</code></pre>\n\n\n\n<p>‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏ß‡πà‡∏≤ <code>useState</code> ‡∏Ñ‡∏∑‡∏≠ wrapper ‡∏ö‡∏ô <code>useReducer</code> ‡∏ã‡∏∂‡πà‡∏á‡∏Å‡πá‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏´‡∏≤‡∏¢‡∏™‡∏á‡∏™‡∏±‡∏¢‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡πÑ‡∏° React ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ <code>useReducer</code> API ‡∏ó‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÜ ‡∏Ñ‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡∏Å‡πá‡∏à‡∏∞‡πÑ‡∏õ‡πÉ‡∏ä‡πâ Redux ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß</p>\n\n\n\n<p>‡∏™‡πà‡∏ß‡∏ô invokeOrReturn ‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤ reducer ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á ‡πÅ‡∏•‡πâ‡∏ß setState function ‡∏°‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏≠‡∏∞‡πÑ‡∏£‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏û‡∏≠‡πÄ‡∏î‡∏≤‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤‡∏°‡∏±‡∏ô implement ‡∏¢‡∏±‡∏á‡πÑ‡∏á</p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-javascript\">function invokeOrReturn(oldState, f) {\n\treturn typeof f == 'function' ? f(oldState) : f;\n}</code></pre>\n\n\n\n<p>‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ô‡∏µ‡πà‡πÅ‡∏´‡∏•‡∏∞ ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤ <code>setState</code> ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏î‡πâ‡∏ß‡∏¢ function ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡πÑ‡∏î‡πâ state ‡πÄ‡∏Å‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô argument ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏≤‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏°‡∏≤‡πÅ‡∏ó‡∏ô</p>\n\n\n\n<h2>useReducer</h2>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-javascript\">export function useReducer(reducer, initialState, init) {\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._component = currentComponent;\n\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst nextValue = hookState._reducer(hookState._value[0], action);\n\t\t\t\tif (hookState._value[0] !== nextValue) {\n\t\t\t\t\thookState._value = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\treturn hookState._value;\n}</code></pre>\n\n\n\n<p>‡∏Ç‡∏≠‡∏Ç‡πâ‡∏≤‡∏° <code>getHookState</code> ‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡πÑ‡∏õ</p>\n\n\n\n<p><code>useReducer</code> ‡∏°‡∏µ state ‡∏Ñ‡∏∑‡∏≠</p>\n\n\n\n<ul><li>Reducer function ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ</li><li>Return value ‡∏Ç‡∏≠‡∏á‡∏°‡∏±‡∏ô‡∏ó‡∏µ‡πà cache ‡πÑ‡∏ß‡πâ ‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ <code>[state, dispatch]</code> ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô <code>__value</code></li><li>Component instance ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏±‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å <code>setState({})</code> ‡πÄ‡∏û‡∏∑‡πà‡∏≠ invalidate view</li></ul>\n\n\n\n<p>‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤‡∏°‡∏±‡∏ô‡πÉ‡∏ä‡πâ global state ‡∏≠‡∏¢‡∏π‡πà 2 ‡∏≠‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠ <code>currentComponent</code> ‡πÅ‡∏•‡∏∞ <code>currentIndex</code> ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏Ñ‡∏£‡πÄ‡∏ã‡∏ï‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏û‡∏ß‡∏Å‡∏ô‡∏µ‡πâ?</p>\n\n\n\n<h2>Actual hooks</h2>\n\n\n\n<p>Preact internal ‡∏°‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ implement functionality ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏±‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤ <em>hook</em> ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô hook ‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏î‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏£‡∏≤‡πÄ‡∏≠‡∏≤ function ‡πÑ‡∏õ‡∏ú‡∏π‡∏Å‡πÑ‡∏ß‡πâ‡∏Å‡∏±‡∏ö‡∏≠‡∏µ‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á library ‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡πâ‡∏≤‡πÉ‡∏Ñ‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Vue ‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠ Hook ‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á Lifecycle <em>hook </em>‡∏ô‡∏±‡πà‡∏ô‡πÅ‡∏´‡∏•‡∏∞</p>\n\n\n\n<p>Hook ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡∏Ñ‡∏á‡πÄ‡∏õ‡πá‡∏ô _render hook ‡∏ã‡∏∂‡πà‡∏á‡πÉ‡∏ô <a href=\"https://github.com/preactjs/preact/blob/59c9abaee16dfeb1411f197ef071c94525087bc6/src/internal.d.ts#L29\">docs</a> ‡∏°‡∏±‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ß‡πà‡∏≤ &#8220;Attach a hook that is invoked before a vnode has rendered&#8221;</p>\n\n\n\n<p>_render hook ‡∏Ç‡∏≠‡∏á hook ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ß‡πà‡∏≤</p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-javascript\">options._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\thooks._pendingEffects = [];\n\t}\n};</code></pre>\n\n\n\n<h2>VNode</h2>\n\n\n\n<p>‡∏ñ‡πâ‡∏≤‡πÉ‡∏Ñ‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Vue ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤ Vue expose <a href=\"https://github.com/vuejs/vue/blob/98b4d683f578bb09c4e56f35048e49441c590a41/src/core/vdom/vnode.js\">VNode API</a> ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏î‡πâ‡∏ß‡∏¢ ‡πÅ‡∏ï‡πà‡πÉ‡∏ô React API ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ñ‡∏∑‡∏≠‡πÄ‡∏õ‡πá‡∏ô internals</p>\n\n\n\n<p>VNode ‡∏Ñ‡∏∑‡∏≠ Virtual DOM node ‡∏ô‡∏±‡πà‡∏ô‡πÅ‡∏´‡∏•‡∏∞ (Component ‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡πá‡∏ô VNode ‡∏ï‡∏£‡∏á‡πÜ ‡πÅ‡∏ï‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏£‡∏≠‡∏ö‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ‡∏ô‡∏∂‡∏á ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤‡∏°‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á read <code>vnode._component</code> ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô)</p>\n\n\n\n<p>‡∏â‡∏∞‡∏ô‡∏±‡πâ‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏±‡∏ô‡∏ó‡∏≥‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô node ‡πÉ‡∏´‡∏°‡πà ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡πÄ‡∏ã‡∏ü currentComponent ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏µ‡πÄ‡∏ã‡∏ï currentIndex ‡πÄ‡∏õ‡πá‡∏ô 0</p>\n\n\n\n<p>‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ Magic ‡∏Ç‡∏≠‡∏á Hook ‡∏Ñ‡∏∑‡∏≠‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏±‡∏ô‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö local state ‡πÅ‡∏ö‡∏ö this.xxx ‡πÄ‡∏Ñ‡πâ‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô global ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ï‡∏±‡∏ß framework</p>\n\n\n\n<p>‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ JavaScript code ‡πÄ‡∏õ‡πá‡∏ô single thread (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏á‡∏ß‡∏•‡∏ß‡πà‡∏≤‡∏£‡∏±‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î concurrent ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡∏ö global) ‡πÅ‡∏•‡∏∞ Preact rendering ‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô synchronous (‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏ö‡∏ö‡∏ß‡πà‡∏≤ render ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏™‡∏•‡∏±‡∏ö‡∏°‡∏≤)</p>\n\n\n\n<p>‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡∏ï‡πà‡∏≠‡∏Ñ‡∏∑‡∏≠ React fiber ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏ó‡∏≥ asynchronous rendering ‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏±‡∏ô implement ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏Å‡∏±‡∏ô‡∏ô‡∏∞?</p>\n\n\n\n<h2>getHookState</h2>\n\n\n\n<p>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏ï‡∏¥‡∏î getHookState ‡πÑ‡∏ß‡πâ</p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-javascript\">const hookState = getHookState(currentIndex++, 2);</code></pre>\n\n\n\n<p>‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ç‡∏≠‡∏á getHookState ‡∏Ñ‡∏∑‡∏≠</p>\n\n\n\n<pre class=\"wp-block-prismatic-blocks\"><code class=\"language-javascript\">function getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\treturn hooks._list[index];\n}</code></pre>\n\n\n\n<p>‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏£‡∏Å‡∏Ñ‡∏∑‡∏≠ Hook ‡πÄ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà functionality hook ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å ‡∏°‡∏±‡∏ô‡πÄ‡∏•‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ currentHook ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ï‡πà‡∏≠‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞ execute hook ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÑ‡∏´‡∏ô‡∏≠‡∏¢‡∏π‡πà ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÑ‡∏ß‡πâ‡πÉ‡∏ô <a href=\"https://github.com/preactjs/preact/blob/59c9abaee16dfeb1411f197ef071c94525087bc6/src/internal.d.ts#L3\">type definition</a></p>\n\n\n\n<p>‡∏ñ‡∏±‡∏î‡∏°‡∏≤‡∏°‡∏±‡∏ô‡∏Å‡πá‡∏à‡∏∞‡∏≠‡πà‡∏≤‡∏ô <code>__hooks</code> ‡∏ö‡∏ô component ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà ‡∏î‡πâ‡∏≤‡∏ô‡πÉ‡∏ô‡∏à‡∏∞‡∏°‡∏µ array ‡∏≠‡∏¢‡∏π‡πà‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà <code>currentIndex</code> ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ ‡∏ã‡∏∂‡πà‡∏á‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î useReducer ‡∏à‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ß‡πà‡∏≤ <code>currentIndex++</code> ‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô index ‡πÑ‡∏õ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</p>\n\n\n\n<p>‡∏ô‡∏±‡πà‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å Magic ‡∏Ç‡∏≠‡∏á hook ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ function ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏™‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏±‡∏ô‡πÅ‡∏≠‡∏ö‡∏°‡∏µ global state ‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏±‡πà‡∏ô‡πÄ‡∏≠‡∏á ‡πÅ‡∏ï‡πà global state ‡∏ô‡∏±‡πâ‡∏ô‡∏ñ‡∏π‡∏Å reset ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á component ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡∏°‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô local state</p>\n\n\n\n<p>‡∏ñ‡πâ‡∏≤‡∏ñ‡∏≤‡∏°‡∏ú‡∏°‡∏ú‡∏°‡∏Å‡πá‡∏¢‡∏±‡∏á‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤ local state ‡∏°‡∏±‡∏ô‡∏Ñ‡∏ß‡∏£‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô attribute ‡∏ö‡∏ô this ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ä‡πâ mixin ‡πÄ‡∏û‡∏∑‡πà‡∏≠ compose behavior ‡∏ã‡∏∂‡πà‡∏á React ‡πÄ‡∏Ñ‡∏¢‡∏°‡∏µ‡πÅ‡∏ï‡πà‡∏ñ‡∏≠‡∏î‡πÑ‡∏õ‡∏ô‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏±‡∏Å‡∏à‡∏∞‡πÄ‡∏à‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ä‡∏ô‡∏Å‡∏±‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ 2 ‡∏≠‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÉ‡∏ô Hook ‡∏Å‡πá‡πÄ‡∏•‡∏¢‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô index ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡πÅ‡∏ó‡∏ô</p>\n\n\n\n<p>‡πÅ‡∏•‡∏∞‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Ç‡∏≠‡∏á‡∏Å‡∏é‡∏Ç‡∏≠‡∏á hook ‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡πÑ‡∏°‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ hook ‡πÉ‡∏ô if ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß hook state ‡∏à‡∏∞‡∏ú‡∏™‡∏°‡∏Å‡∏±‡∏ô‡∏°‡∏±‡πà‡∏ß</p>\n\n\n\n<p>‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡∏Ñ‡∏∑‡∏≠ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡πÑ‡∏° Hook ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö class component ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏ã‡∏∂‡πà‡∏á‡∏ñ‡πâ‡∏≤‡πÑ‡∏õ‡∏≠‡πà‡∏≤‡∏ô issue ‡∏ï‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á ‡∏ó‡∏µ‡∏° Preact ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤</p>\n\n\n\n<blockquote class=\"wp-block-quote\"><p>You may be wondering why we mix those and the reason is simply to save some bytes. And yes, this allows hooks to be used in class components! We don&#8217;t really advertise that though <img src=\"https://s.w.org/images/core/emoji/13.0.1/72x72/1f44d.png\" alt=\"üëç\" class=\"wp-smiley\" style=\"height: 1em; max-height: 1em;\" /></p></blockquote>\n\n\n\n<p>‡∏ö‡∏ô Preact ‡πÉ‡∏ä‡πâ Hook ‡∏ö‡∏ô class component ‡πÑ‡∏î‡πâ! (‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà public API)</p>\n\n\n\n<h2>‡∏™‡∏£‡∏∏‡∏õ</h2>\n\n\n\n<p>‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà Preact Hook ‡∏ó‡∏≥‡∏Ñ‡∏∑‡∏≠</p>\n\n\n\n<ol><li>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞ render vdom node ‡πÉ‡∏´‡∏°‡πà ‡πÉ‡∏´‡πâ‡πÄ‡∏ã‡∏ï currentComponent ‡πÅ‡∏•‡∏∞‡πÄ‡∏ã‡∏ï currentIndex=0</li><li>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏Å hook ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡πÑ‡∏õ‡∏≠‡πà‡∏≤‡∏ô state ‡∏ö‡∏≤‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ö‡∏ô component ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</li><li>‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏±‡∏ô‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô pointer ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ hook ‡∏ï‡∏±‡∏ß‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡πÑ‡∏î‡πâ state ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô</li></ol>\n\n\n\n<h2>Final thoughts</h2>\n\n\n\n<p>‡∏´‡∏•‡∏±‡∏á‡∏≠‡πà‡∏≤‡∏ô‡∏à‡∏ö‡∏Å‡πá‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏á‡∏™‡∏±‡∏¢‡∏ß‡πà‡∏≤‡∏Ñ‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô React ‡∏™‡∏±‡∏Å‡∏Å‡∏µ‡πà‡∏Ñ‡∏ô‡∏ô‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏µ‡∏¢‡∏£‡πå Hook ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡∏ß‡πà‡∏≤ Hook ‡∏°‡∏±‡∏ô implement ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£ (‡πÉ‡∏´‡πâ project ‡πÄ‡∏õ‡∏•‡πà‡∏≤‡πÜ ‡∏´‡πâ‡∏≤‡∏°‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡∏≠‡∏á‡∏à‡∏≤‡∏Å npm ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Hook ‡∏¢‡∏±‡∏á‡πÑ‡∏á?)</p>\n\n\n\n<p>‡∏Å‡πá‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÑ‡∏õ‡∏•‡∏≠‡∏á‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö interview ‡∏î‡∏π ‡πÅ‡∏ï‡πà‡∏Ñ‡∏¥‡∏î‡∏î‡∏π‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Hook ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πà‡∏ô JavaScript (‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏£‡∏≤ require) ‡πÅ‡∏ï‡πà‡∏ô‡∏±‡πà‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô frontend dev ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡πÑ‡∏î‡πâ (‡∏¢‡∏±‡∏á‡∏°‡∏µ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏≠‡∏µ‡∏Å‡πÄ‡∏¢‡∏≠‡∏∞‡πÅ‡∏¢‡∏∞ ‡πÄ‡∏ä‡πà‡∏ô CSS, box layout, sematic markup, web optimization, SEO) ‡∏°‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏î‡∏µ‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£</p>\n\n\n\n<p>‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡πÄ‡∏ó‡∏™ backend dev ‡∏Å‡πá‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏û‡∏£‡∏≤‡∏∞ React ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á Frontend</p>\n\n\n\n<p><strong>‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô software team ‡∏à‡∏∞‡πÉ‡∏´‡πâ role ‡πÑ‡∏´‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á React?</strong></p>\n\n\n\n<p>‡∏°‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏¢‡∏≤‡∏Å‡∏°‡∏≤‡∏Å‡πÅ‡∏•‡∏∞ require ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏•‡∏∂‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏ù‡∏±‡πà‡∏á backend (‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞ VDOM implementation ‡∏Å‡∏±‡∏ö Suspense) ‡πÅ‡∏•‡∏∞ frontend ‡πÄ‡∏•‡∏¢ ‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡∏±‡πà‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏ô‡∏¥‡∏¢‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á Full stack developer ‡∏Å‡∏±‡∏ô‡∏ô‡∏∞</p>","author":"whs","siteTitle":"Quietly Verbose","siteHash":"5f972a6fe70a917eb1b1aa165b3cb2be8a9465af33ab38bf05f34c55c0e40587","entryHash":"9c8ab1e35e4235246d7c3a8abcd6501f8769c6c80a8ff0c3b6d91ee488ace6f7","category":"Thai"}