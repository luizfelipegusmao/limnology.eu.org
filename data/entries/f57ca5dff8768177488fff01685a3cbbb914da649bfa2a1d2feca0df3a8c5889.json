{"title":"[Arduino] วิธีใช้งาน MAX44009 (Ambient Light Sensor) ไม่ถึง 5 นาที","link":"https://thanapon.info/arduino-max44009/","date":1563992946000,"content":"<h2>Overview:</h2>\n\n\n\n<p>MAX44009 (Ambient Light Sensor) เป็นเซ็นเซอร์วัดความเข้มแสงแบบ I2C ซึ่งใช้พลังงานต่ำมาก Ultra-Low Power กันเลยทีเดียว โดยทางผู้ผลิตเขาบอกว่าใช้พลังงานน้อยกว่า 1μA และสำหรับการทำงานนั้นรองรับ ADC ได้ถึง 22-bit และวัดความเข้มแสงได้ตั้งแต่ 0.045 Lux ถึง 188,000 Lux อีกทั้งตัวโมดูลนั้นได้ติด IR filter และ UV filter มาด้วยเพื่อเพิ่มประสิทธิภาพของ Photodiode ในการรับแสงครับ ส่วนตารางด้านล่างนี้จะเป็นสเปคของโมดูลนี้นะครับ</p>\n\n\n\n<div><figure><img src=\"https://miro.medium.com/max/887/1*nRBjqEQ2YRff-HRPlUgwpw.png\" /></figure></div>\n\n\n\n<h2>Hardware Component:</h2>\n\n\n\n<ul><li>Arduino Uno R3</li><li>Ambient Light Sensor(MAX44009)</li><li>Wire</li></ul>\n\n\n\n<h2>Library Installation::</h2>\n\n\n\n<p>อันดับแรกเข้าไปดาวน์โหลดและติดตั้ง Library สำหรับ MAX44009 ก่อนนะครับ ซึ่งวิธีติดตั้ง Library เพียงเราเปิดโปรแกรม ArduinoIDE หลังจากนั้นเลือก Sketch -&gt; Include Library -&gt; Add .ZIP Library แล้วจากนั้นก็เลือก Library ที่เราดาวน์โหลดมา</p>\n\n\n\n<blockquote><p><a href=\"https://drive.google.com/file/d/1WzWhvkSZzZtEVgCEnCqbO0XaBNTGZzBS/view?usp=sharing\" target=\"_blank\">Max44009-Library</a></p><cite>Library for MAX44009 ambient light sensor</cite></blockquote>\n\n\n\n<h2>Wiring Diagram:</h2>\n\n\n\n<figure><img src=\"https://miro.medium.com/max/803/1*YCXrMdPrnZ5gSsV5aOTslQ.png\" /></figure>\n\n\n\n<blockquote><p>ต่อสายเสร็จแล้ว ติดตั้ง Library เสร็จแล้วขั้นตอนต่อไปทดสอบใช้งานกันครับ</p></blockquote>\n\n\n\n<p>เตรียมโค๊ดที่จะใช้ในการทดสอบกันก่อนเลย เสร็จแล้วทำการอัพโหลดเข้าไปยัง Arduino Board โลด!!!</p>\n\n\n\n<div><pre><code>#include \"Wire.h\"\n#include \"Max44009.h\"\n\nMax44009 myLux(0x4A);\n\nuint32_t lastDisplay = 0;\n\nvoid setup()\n{\n  Serial.begin(115200);\n  Serial.println(\"&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;Start MAX44009&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\");\n \n}\n\nvoid loop()\n{\n  if (millis() - lastDisplay &gt;= 1000)\n  {\n    lastDisplay += 1000;\n    float lux = myLux.getLux();\n    int err = myLux.getError();\n    if (err != 0)\n    {\n      Serial.print(\"Error:\\t\");\n      Serial.println(err);\n    }\n    else\n    {\n      Serial.print(\"Lux:\\t\");\n      Serial.println(lux);\n    }\n  }\n}</code></pre></div>\n\n\n\n<p>เมื่ออัพโหลดเสร็จให้เปิด Serial Monitor เพื่อดูค่าของ Lux โดยตั้ง Baudrate อยู่ที่ 115200 bps ซึ่งจากตัวอย่างนี้ผมได้ใช้แสงจากแฟลชของโทรศัพท์ส่องไปที่ตัวรับค่าโดยตรงจะเห็นได้ว่าค่าสูงสุดที่อ่านได้นั้นจะอยู่ที่ <strong>2937.60</strong> <strong>(บางคนอาจจะไม่พบปัญหานะครับ)</strong> ถึงแม้ว่าจะเอาแสงจากแฟลชเข้าใกล้เท่าไหร่ค่าก็ไม่เพิ่มขึ้นแม้แต่อย่างใด <strong><em>อ่าวว! มีปัญหาซะแล้วสิ</em></strong></p>\n\n\n\n<div><figure><img src=\"https://miro.medium.com/max/600/1*IWP5mJ2kTlz8NhJbx41vFg.gif\" /></figure></div>\n\n\n\n<p><strong>วิธีแก้ไขสำหรับคนที่มีปัญหานะครับ</strong></p>\n\n\n\n<p>ให้เราเพิ่มโค๊ดเข้าไปไว้ที่ฟังก์ชั่น void setup() โดยใส่ไว้แค่ครั้งแรกครั้งเดียวนะครับเพื่อที่บอร์ด Arduino ของเราจะไปตั้งค่า IC MAX44009 ให้ทำงานใน Automatic Mode หลังจากนั้นก็สามารถลบออกได้เลยครับ</p>\n\n\n\n<pre>myLux.setAutomaticMode();</pre>\n\n\n\n<p>ซึ่งตัวโค๊ดนี้จะเข้าไปตั้งค่าให้ IC MAX44009 ทำงานภายใต้อัลกอลิทึมของมันเอง (Automatic Mode) ซึ่งโค๊ดก่อนหน้านั้นที่เราทำการอัพโหลดเพื่อทดสอบนั้นก็สามารถใช้งานได้นะครับแต่ตัว IC MAX44009 อาจจะถูกตั้งค่ามาจากโรงงานให้ทำงานใน Manual Mode เท่านั้นเองครับ <strong><em>ลองอัพโหลด Sketch อีกรอบสิ</em></strong></p>\n\n\n\n<div><figure><img src=\"https://miro.medium.com/max/855/1*vHyve0k1gfOCmjEqTYGPeQ.png\" /></figure></div>\n\n\n\n<div><figure><img src=\"https://miro.medium.com/max/800/0*E8hWF4jZAMq4wjAh.png\" /></figure></div>\n\n\n\n<p>เพียงเท่านี้เราก็มี Arduino Lux Meter ไว้ใช้งานแล้วนะครับ ซึ่งค่าที่ได้นั้นอาจจะถูกต้องหรือไม่นั้นผมก็ไม่ทราบเหมือนกันเพราะผมก็ไม่มี Lux Meter ใช้สำหรับทดสอบเหมือนกันครับ 5555 แต่สำหรับตัวเซ็นเซอร์ตัวนี้สามารถนำไปประยุกต์ได้กับหลายโปรเจค อาจจะเป็นการเก็บค่าความเข้มแสงแดดสำหรับวิเคราะห์การเจริญเติบโตของพืชผักหรือยังไงก็แล้วแต่นะครับ</p>\n\n\n\n<blockquote><p>สำหรับวันนี้ขอบคุณที่ติดตามครับ สวัสดีครับ <img src=\"https://s.w.org/images/core/emoji/13.0.0/72x72/1f642.png\" /></p></blockquote>\n<p>The post <a href=\"https://thanapon.info/arduino-max44009/\">[Arduino] วิธีใช้งาน MAX44009 (Ambient Light Sensor) ไม่ถึง 5 นาที</a> appeared first on <a href=\"https://thanapon.info\">Thanapon</a>.</p>","author":"thanapon.tap","siteTitle":"Thanapon","siteHash":"6a039c2f54d76e4c49227d80968f2a30de5427cc57525c047c383ea3563cde5f","entryHash":"f57ca5dff8768177488fff01685a3cbbb914da649bfa2a1d2feca0df3a8c5889","category":"Thai"}