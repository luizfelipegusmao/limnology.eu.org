{"title":"[AWS-IoT] ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ AWS Services ‡∏ú‡πà‡∏≤‡∏ô Device Certificate X.509 ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Credential-Provider [1]","link":"https://thanapon.info/aws-iot-credential-provider/?utm_source=rss&utm_medium=rss&utm_campaign=aws-iot-credential-provider","date":1673136000000,"content":"<p>‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏π‡πâ‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö‡∏ß‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà AWS IoT Core service ‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ X.509 certificates ‡∏ú‡πà‡∏≤‡∏ô MQTT with TLS [MQTTs] ‡πÑ‡∏õ‡∏ó‡∏µ‡πà AWS ‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ</p>\n\n\n\n<p>‡∏õ‡∏Å‡∏ï‡∏¥‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà AWS IoT Core ‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ 3 Component ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠</p>\n\n\n\n<ul>\n<li>Root CA ‡∏Ç‡∏≠‡∏á AWS</li>\n\n\n\n<li>Private key</li>\n\n\n\n<li>Client device certificate</li>\n</ul>\n\n\n\n<p>‡∏ã‡∏∂‡πà‡∏á‡∏ú‡∏°‡∏Å‡πá‡πÄ‡∏Å‡∏¥‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤ ‡∏≠‡πà‡∏≤‡∏ß!! ‡πÅ‡∏•‡πâ‡∏ß‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÑ‡∏õ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö Service ‡∏≠‡∏∑‡πà‡∏ô‡∏´‡∏•‡πà‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏¢‡∏±‡∏á‡πÑ‡∏á? ‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ Generate AWS credentials ‡∏ó‡∏µ‡πà‡∏°‡∏µ Access token ‡∏Å‡∏±‡∏ö Secret token ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡∏¢‡∏±‡∏î‡πÉ‡∏™‡πà‡πÉ‡∏ô Firmware ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏ô‡πâ‡∏≤‡∏≤ ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏±‡∏ô‡∏Å‡πá‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏´‡∏•‡πà‡∏∞ ‡πÅ‡∏ï‡πà!!!!! ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á Security ‡∏Å‡∏±‡∏ö Key-Rotate ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏•‡πà‡∏∞ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ñ‡πâ‡∏≤‡∏´‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á Key ‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏´‡∏•‡∏∏‡∏î‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏•‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Key ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏£‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏•‡∏¢‡∏´‡∏£‡∏≠ ‡∏î‡∏π‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏¢‡∏≤‡∏Å‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏ô‡∏∞ ‡∏ñ‡∏∂‡∏á‡πÅ‡∏°‡πâ‡∏à‡∏∞‡πÉ‡∏ä‡πâ OTA [over-the-air update] ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡πÄ‡∏ñ‡∏≠‡∏∞</p>\n\n\n\n<figure><img width=\"1007\" height=\"729\" src=\"https://thanapon.info/wp-content/uploads/2023/01/image.png\" srcset=\"https://thanapon.info/wp-content/uploads/2023/01/image.png 1007w, https://thanapon.info/wp-content/uploads/2023/01/image-300x217.png 300w, https://thanapon.info/wp-content/uploads/2023/01/image-768x556.png 768w, https://thanapon.info/wp-content/uploads/2023/01/image-600x434.png 600w\" /></figure>\n\n\n\n<p>‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Å‡πá‡πÄ‡∏à‡∏≠ Solution ‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô Best-practics ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏∑‡∏≠ AWS services ‡∏ô‡∏±‡πâ‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ <a href=\"https://docs.aws.amazon.com/general/latest/gr/signature-version-4.html\" target=\"_blank\">AWS Signature Version 4 format</a> ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£ Authorization ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô AWS services ‡∏ô‡∏±‡πâ‡∏ô‡∏´‡∏•‡πà‡∏∞ ‡πÇ‡∏î‡∏¢‡∏°‡∏±‡∏ô‡∏à‡∏∞‡πÉ‡∏ä‡πâ Access token, Secret token ‡∏•‡∏∞‡∏Å‡πá Session token ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á AWS Request ‡∏ä‡∏∏‡∏î‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡πÅ‡∏õ‡∏∞‡πÑ‡∏õ‡∏Å‡∏±‡∏ö Header ‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô AWS Service ‡∏ô‡∏±‡πâ‡∏ô‡πÜ</p>\n\n\n\n<p>‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà Token ‡∏ó‡∏±‡πâ‡∏á 3 ‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏°‡∏≤‡πÑ‡∏î‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏´‡∏£‡∏≠??? ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á Token ‡∏û‡∏ß‡∏Å‡∏ô‡∏µ‡πâ‡∏ú‡πà‡∏≤‡∏ô <strong>Credential Provider</strong> ‡∏Ç‡∏≠‡∏á AWS IoT Core ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ‡πÅ‡∏Ñ‡πà Device Certificate ‡πÅ‡∏ö‡∏ö X.509 ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏•‡∏¢</p>\n\n\n\n<blockquote>\n<p>‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Credential Provider ‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏≥‡∏´‡∏ô‡∏î Role ‡∏Ç‡∏≠‡∏á Token ‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Assume role ‡πÉ‡∏ô AWS IoT Core ‡∏Å‡∏±‡∏ö IAM ‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏°‡∏µ Permission ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ Access service ‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏î‡πâ‡∏ö‡πâ‡∏≤‡∏á ‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà Token ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏°‡∏≤‡∏Å‡πá‡∏à‡∏∞‡∏°‡∏µ‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ç‡∏≠‡∏á‡∏°‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞</p>\n</blockquote>\n\n\n\n<hr />\n\n\n\n<h2>‡∏™‡∏≤‡∏ò‡∏¢‡∏≤‡∏¢‡∏°‡∏≤‡πÄ‡∏¢‡∏≠‡∏∞‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏¢‡∏•‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö</h2>\n\n\n\n<ul>\n<li>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ Root CA, Private Key ‡πÅ‡∏•‡∏∞ Device Certificate ‡∏Å‡πà‡∏≠‡∏ô‡∏ã‡∏∂‡πà‡∏á‡∏à‡∏∞‡∏ñ‡∏π‡∏Å Generate ‡∏°‡∏≤‡∏à‡∏≤‡∏Å AWS IoT Core ‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏£‡∏Å‡πÜ‡πÄ‡∏•‡∏¢</li>\n</ul>\n\n\n<div>\n<figure><img loading=\"lazy\" src=\"https://thanapon.info/wp-content/uploads/2023/01/image-1-821x1024.png\" width=\"411\" height=\"512\" srcset=\"https://thanapon.info/wp-content/uploads/2023/01/image-1-821x1024.png 821w, https://thanapon.info/wp-content/uploads/2023/01/image-1-241x300.png 241w, https://thanapon.info/wp-content/uploads/2023/01/image-1-768x958.png 768w, https://thanapon.info/wp-content/uploads/2023/01/image-1-600x748.png 600w, https://thanapon.info/wp-content/uploads/2023/01/image-1.png 1198w\" /></figure></div>\n\n\n<ul>\n<li>‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ Device certiifcate ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏õ‡∏´‡∏≤ Endpoint ‡∏Ç‡∏≠‡∏á Credential-provider ‡∏Ç‡∏≠‡∏á AWS IoT Core ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ AWS CLI ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Endpoint ‡∏ô‡∏±‡πâ‡∏ô‡πÜ</li>\n</ul>\n\n\n\n<div><pre><code>aws iot describe-endpoint --endpoint-type iot:CredentialProvider</code></pre></div>\n\n\n\n<figure><img loading=\"lazy\" width=\"1024\" height=\"259\" src=\"https://thanapon.info/wp-content/uploads/2023/01/image-2-1024x259.png\" srcset=\"https://thanapon.info/wp-content/uploads/2023/01/image-2-1024x259.png 1024w, https://thanapon.info/wp-content/uploads/2023/01/image-2-300x76.png 300w, https://thanapon.info/wp-content/uploads/2023/01/image-2-768x194.png 768w, https://thanapon.info/wp-content/uploads/2023/01/image-2-1536x388.png 1536w, https://thanapon.info/wp-content/uploads/2023/01/image-2-600x152.png 600w, https://thanapon.info/wp-content/uploads/2023/01/image-2.png 1726w\" /></figure>\n\n\n\n<ul>\n<li>‡∏™‡∏£‡πâ‡∏≤‡∏á Policy ‡πÉ‡∏ô IAM ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡πà‡∏≤ Token ‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏´‡πâ Access service ‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏î‡πâ‡∏ö‡πâ‡∏≤‡∏á</li>\n</ul>\n\n\n\n<figure><img loading=\"lazy\" width=\"1024\" height=\"490\" src=\"https://thanapon.info/wp-content/uploads/2023/01/image-4-1024x490.png\" srcset=\"https://thanapon.info/wp-content/uploads/2023/01/image-4-1024x490.png 1024w, https://thanapon.info/wp-content/uploads/2023/01/image-4-300x143.png 300w, https://thanapon.info/wp-content/uploads/2023/01/image-4-768x367.png 768w, https://thanapon.info/wp-content/uploads/2023/01/image-4-1536x734.png 1536w, https://thanapon.info/wp-content/uploads/2023/01/image-4-2048x979.png 2048w, https://thanapon.info/wp-content/uploads/2023/01/image-4-600x287.png 600w\" /></figure>\n\n\n\n<blockquote>\n<p>‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡∏°‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏ú‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ Access ‡πÑ‡∏õ‡∏ó‡∏µ‡πà S3 ‡πÑ‡∏î‡πâ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á Policy ‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ Attach policy ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô Role ‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ</p>\n</blockquote>\n\n\n\n<ul>\n<li>‡∏™‡∏£‡πâ‡∏≤‡∏á Role ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ IAM Console ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá Attach policy ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢<strong><mark> ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏° Trust policy ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞</mark></strong></li>\n</ul>\n\n\n\n<figure><img loading=\"lazy\" width=\"1024\" height=\"517\" src=\"https://thanapon.info/wp-content/uploads/2023/01/image-6-1024x517.png\" srcset=\"https://thanapon.info/wp-content/uploads/2023/01/image-6-1024x517.png 1024w, https://thanapon.info/wp-content/uploads/2023/01/image-6-300x152.png 300w, https://thanapon.info/wp-content/uploads/2023/01/image-6-768x388.png 768w, https://thanapon.info/wp-content/uploads/2023/01/image-6-1536x776.png 1536w, https://thanapon.info/wp-content/uploads/2023/01/image-6-2048x1035.png 2048w, https://thanapon.info/wp-content/uploads/2023/01/image-6-600x303.png 600w\" /></figure>\n\n\n\n<div><pre><code>{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Principal\": {\n                \"Service\": \"credentials.iot.amazonaws.com\"\n            },\n            \"Action\": \"sts:AssumeRole\"\n        }\n    ]\n}</code></pre></div>\n\n\n\n<ul>\n<li>‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÑ‡∏î‡πâ Role ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ Access S3 ‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß</li>\n</ul>\n\n\n\n<figure><img loading=\"lazy\" width=\"1024\" height=\"503\" src=\"https://thanapon.info/wp-content/uploads/2023/01/image-3-1024x503.png\" srcset=\"https://thanapon.info/wp-content/uploads/2023/01/image-3-1024x503.png 1024w, https://thanapon.info/wp-content/uploads/2023/01/image-3-300x147.png 300w, https://thanapon.info/wp-content/uploads/2023/01/image-3-768x377.png 768w, https://thanapon.info/wp-content/uploads/2023/01/image-3-1536x755.png 1536w, https://thanapon.info/wp-content/uploads/2023/01/image-3-2048x1006.png 2048w, https://thanapon.info/wp-content/uploads/2023/01/image-3-600x295.png 600w\" /></figure>\n\n\n\n<ul>\n<li>‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà AWS IoT Core ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Role aliases ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Authen S3</li>\n</ul>\n\n\n\n<blockquote>\n<p>Credential duration ‡∏Ñ‡∏∑‡∏≠ token ‡∏à‡∏∞ expire ‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏ú‡πà‡∏≤‡∏ô Credential provider</p>\n</blockquote>\n\n\n\n<figure><img loading=\"lazy\" width=\"1024\" height=\"489\" src=\"https://thanapon.info/wp-content/uploads/2023/01/image-7-1024x489.png\" srcset=\"https://thanapon.info/wp-content/uploads/2023/01/image-7-1024x489.png 1024w, https://thanapon.info/wp-content/uploads/2023/01/image-7-300x143.png 300w, https://thanapon.info/wp-content/uploads/2023/01/image-7-768x367.png 768w, https://thanapon.info/wp-content/uploads/2023/01/image-7-1536x733.png 1536w, https://thanapon.info/wp-content/uploads/2023/01/image-7-2048x978.png 2048w, https://thanapon.info/wp-content/uploads/2023/01/image-7-600x286.png 600w\" /></figure>\n\n\n\n<ul>\n<li>‡πÑ‡∏õ‡∏ó‡∏µ‡πà Security &gt; Policies ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á Policy ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ Role Aliases ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö Device</li>\n</ul>\n\n\n\n<figure><img loading=\"lazy\" width=\"1024\" height=\"450\" src=\"https://thanapon.info/wp-content/uploads/2023/01/image-8-1024x450.png\" srcset=\"https://thanapon.info/wp-content/uploads/2023/01/image-8-1024x450.png 1024w, https://thanapon.info/wp-content/uploads/2023/01/image-8-300x132.png 300w, https://thanapon.info/wp-content/uploads/2023/01/image-8-768x337.png 768w, https://thanapon.info/wp-content/uploads/2023/01/image-8-1536x675.png 1536w, https://thanapon.info/wp-content/uploads/2023/01/image-8-2048x899.png 2048w, https://thanapon.info/wp-content/uploads/2023/01/image-8-600x264.png 600w\" /></figure>\n\n\n\n<ul>\n<li>‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà Things ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏Å‡πà‡∏≠‡∏ô ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Certificate tab ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å CertificateID</li>\n</ul>\n\n\n\n<figure><img loading=\"lazy\" width=\"1024\" height=\"458\" src=\"https://thanapon.info/wp-content/uploads/2023/01/image-9-1024x458.png\" srcset=\"https://thanapon.info/wp-content/uploads/2023/01/image-9-1024x458.png 1024w, https://thanapon.info/wp-content/uploads/2023/01/image-9-300x134.png 300w, https://thanapon.info/wp-content/uploads/2023/01/image-9-768x343.png 768w, https://thanapon.info/wp-content/uploads/2023/01/image-9-1536x687.png 1536w, https://thanapon.info/wp-content/uploads/2023/01/image-9-2048x916.png 2048w, https://thanapon.info/wp-content/uploads/2023/01/image-9-600x268.png 600w\" /></figure>\n\n\n\n<ul>\n<li>Attact policies ‡∏ä‡∏∑‡πà‡∏≠ <strong>AssumeRoleWithCertificate</strong> ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÄ‡∏•‡∏¢</li>\n</ul>\n\n\n\n<figure><img loading=\"lazy\" width=\"1024\" height=\"233\" src=\"https://thanapon.info/wp-content/uploads/2023/01/image-10-1024x233.png\" srcset=\"https://thanapon.info/wp-content/uploads/2023/01/image-10-1024x233.png 1024w, https://thanapon.info/wp-content/uploads/2023/01/image-10-300x68.png 300w, https://thanapon.info/wp-content/uploads/2023/01/image-10-768x175.png 768w, https://thanapon.info/wp-content/uploads/2023/01/image-10-1536x350.png 1536w, https://thanapon.info/wp-content/uploads/2023/01/image-10-2048x467.png 2048w, https://thanapon.info/wp-content/uploads/2023/01/image-10-600x137.png 600w\" /></figure>\n\n\n\n<h2>‡∏ó‡∏î‡∏™‡∏≠‡∏ö Curl ‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏±‡∏Å‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏ß‡πà‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°</h2>\n\n\n\n<div><pre><code>curl --cert &lt;CERTIFICATE.crt&gt; --key &lt;PRIVATE-KEY.key&gt; -H \"x-amzn-iot-thingname: &lt;THINGS-NAME&gt;\" --cacert AmazonRootCA1.pem https://&lt;ENDPOINT&gt;/role-aliases/&lt;ROLE-ALIAS&gt;/credentials</code></pre></div>\n\n\n\n<blockquote>\n<p><strong>CERTIFICATE.crt</strong>: Device Certificate ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Things</p>\n\n\n\n<p><strong>PRIVATE-KEY.key</strong>: Private Key ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Things</p>\n\n\n\n<p><strong>THINGS-NAME</strong>: ‡∏ä‡∏∑‡πà‡∏≠ Thing</p>\n\n\n\n<p><strong>ENDPOINT</strong>: Endpoint ‡∏Ç‡∏≠‡∏á Credential provider</p>\n\n\n\n<p><strong>ROLE-ALIAS</strong>: Role alias ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ</p>\n</blockquote>\n\n\n\n<h2>Result:</h2>\n\n\n\n<figure><img loading=\"lazy\" width=\"1024\" height=\"481\" src=\"https://thanapon.info/wp-content/uploads/2023/01/image-12-1024x481.png\" srcset=\"https://thanapon.info/wp-content/uploads/2023/01/image-12-1024x481.png 1024w, https://thanapon.info/wp-content/uploads/2023/01/image-12-300x141.png 300w, https://thanapon.info/wp-content/uploads/2023/01/image-12-768x361.png 768w, https://thanapon.info/wp-content/uploads/2023/01/image-12-600x282.png 600w, https://thanapon.info/wp-content/uploads/2023/01/image-12.png 1438w\" /></figure>\n\n\n\n<p>‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥ AccessKeyId, SecretAccessKey ‡πÅ‡∏•‡∏∞ SessionToken ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏ï‡πà‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á AWS Signature V4 ‡∏ã‡∏∂‡πà‡∏á‡∏ú‡∏°‡∏Ç‡∏≠‡∏¢‡∏Å‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏µ‡∏Å‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡∏´‡∏ß‡∏±‡∏á‡∏ß‡πà‡∏≤‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ö‡∏ô AWS IoT Core ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô Arduino ‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏à‡∏∞‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö</p>\n\n\n\n<p>‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡∏∞‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà 2566 ‡∏Ñ‡∏£‡∏±‡∏ö <img src=\"https://s.w.org/images/core/emoji/14.0.0/72x72/1f386.png\" alt=\"üéÜ\" /><img src=\"https://s.w.org/images/core/emoji/14.0.0/72x72/1f386.png\" alt=\"üéÜ\" /><img src=\"https://s.w.org/images/core/emoji/14.0.0/72x72/1f386.png\" alt=\"üéÜ\" /><img src=\"https://s.w.org/images/core/emoji/14.0.0/72x72/1f386.png\" alt=\"üéÜ\" /><img src=\"https://s.w.org/images/core/emoji/14.0.0/72x72/1f387.png\" alt=\"üéá\" /><img src=\"https://s.w.org/images/core/emoji/14.0.0/72x72/1f387.png\" alt=\"üéá\" /></p>\n\n\n<div>\n<figure><img loading=\"lazy\" src=\"https://thanapon.info/wp-content/uploads/2023/01/image-13-1024x576.png\" width=\"512\" height=\"288\" srcset=\"https://thanapon.info/wp-content/uploads/2023/01/image-13-1024x576.png 1024w, https://thanapon.info/wp-content/uploads/2023/01/image-13-300x169.png 300w, https://thanapon.info/wp-content/uploads/2023/01/image-13-768x432.png 768w, https://thanapon.info/wp-content/uploads/2023/01/image-13-600x338.png 600w, https://thanapon.info/wp-content/uploads/2023/01/image-13.png 1280w\" /></figure></div>\n\n\n<blockquote>\n<p><a href=\"https://docs.aws.amazon.com/iot/latest/developerguide/authorizing-direct-aws.html\" target=\"_blank\">https://docs.aws.amazon.com/iot/latest/developerguide/authorizing-direct-aws.html</a></p>\n<cite>Authorizing direct calls to AWS services using AWS IoT Core credential provider</cite></blockquote><p>The post <a href=\"https://thanapon.info/aws-iot-credential-provider/\">[AWS-IoT] ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ AWS Services ‡∏ú‡πà‡∏≤‡∏ô Device Certificate X.509 ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Credential-Provider [1]</a> first appeared on <a href=\"https://thanapon.info\">Thanapon</a>.</p>","author":"thanapon.tap","siteTitle":"Thanapon","siteHash":"6a039c2f54d76e4c49227d80968f2a30de5427cc57525c047c383ea3563cde5f","entryHash":"7d8709b6d8458b68cf70743fb1d6d50feebd0d45fc103b1cdd14ab2bb9ffc252","category":"Thai"}